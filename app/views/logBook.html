<div class="panel panel-primary content-panel">
    <div class="panel-heading">
        <!--<h3 class="panel-title">View blood glucose notebook</h3>-->
     
            <button ng-click="back()" type="button" class="btn btn-lg"><span class="glyphicon glyphicon-step-backward"></span></button>
            <select ng-model="interval" ng-change="change()">
                <option value="day">{{ 'logBook.day' | translate }}</option>
                <option value="week">{{ 'logBook.week' | translate }}</option>
                <option value="month">{{ 'logBook.month' | translate }}</option>
                <option value="year">{{ 'logBook.year' | translate }}</option>
            </select>  
            <span>{{ 'logBook.from' | translate }} {{timeInterval.begin| date:'dd/MM/yyyy'}} {{ 'logBook.to' | translate }} {{timeInterval.end| date:'dd/MM/yyyy'}}</span>
            <button ng-click="advance()" type="button" class="btn btn-lg"><span class="glyphicon glyphicon-step-forward right"></span></button>

            
            <div class="btn-group" ng-repeat="(key, value) in eventsTypes track by $index">            
                <button type="button" class="btn btn-info btn-responsive" ng-model="resource[key]" btn-checkbox>{{value| translate}}</button>
            </div>

            <button ng-click="printToPDF()" type="button" class="btn btn-lg">{{ 'logBook.print' | translate }}</button>     
    </div>

    <!-- Header -->
    <div class="panel-body ">

    </div>

    <div class="table-responsive">
        <table class="table">
            <th ng-repeat="period in header track by $index">
                {{period.name}}
            </th>
            <tr ng-repeat="line in data track by $index" ng-if="$index != 0">
                <td ng-repeat="bloodGlucoseReadings in line track by $index">
                    <!-- Row header -->
                    <div ng-if="$index == 0">
                        <div ng-if="interval == 'week'">
                            <strong>{{bloodGlucoseReadings.date| date:'EEEE d MMM'}}</strong>
                        </div>
                        <div ng-if="interval != 'week'">
                            <strong>{{bloodGlucoseReadings.text}}</strong>
                        </div>                            
                    </div>
                    <div ng-if="($index != 0 && interval === 'week') || (interval === 'day')">
                        <div ng-repeat="bloodGlucoseReading in bloodGlucoseReadings| orderBy:'dateTime'">                            
                            <div>
                                <bloglu-event bloglu-event="bloodGlucoseReading"></bloglu-event>                                
                            </div>
                        </div>    
                        <!-- handle case of empty section -->
                        <div ng-if="bloodGlucoseReadings.length === 0" class="text-center">
                            <a href="" ng-click="addEvent(line[0], header[$index])" class="glyphicon glyphicon-plus-sign"/>
                        </div>
                    </div>

                    <div ng-if="interval !== 'week' && interval !== 'day' && bloodGlucoseReadings.length > 0">
                        <div ng-if="bloodGlucoseReadings.length > 0">                                
                            <div ng-repeat="(key, value) in bloodGlucoseReadings[0]">
                                
                                <bloglu-event-group bloglu-grouped-event="value" ></bloglu-event-group>
                                
                                <!--
                                <div class="panel panel-default">
                                    <div class="panel-heading">{{value.title| translate}}</div>
                                    <div class="panel-body">
                                        <p>
                                            Maximum: {{value.maximum}}
                                        </p>
                                        <p>
                                            Minimum: {{value.minimum}}
                                        </p>
                                        <p>
                                            Average: {{value.average}}
                                        </p>
                                        <p>
                                            Number: {{value.nb}}
                                        </p>
                                    </div>
                                </div>
                                -->
                                
                            </div>
                        </div>
                        <!--
                        <div>
                            <button type="button" class="btn btn-primary" ng-click="zoomInInterval(header[$index].begin)">View</button>
                        </div>
                        -->

                    </div>

                </td>                
            </tr> 
        </table>

    </div>


</div>